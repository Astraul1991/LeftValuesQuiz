<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Risultati del Quiz Politico</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1a1a1a;
      color: #fff;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #ff5555;
    }

    .axis-container {
      margin-bottom: 40px;
    }

    .axis-title {
      font-size: 20px;
      margin-bottom: 8px;
    }

    .bar-wrapper {
      display: flex;
      align-items: center;
    }

    .label {
      width: 100px;
      text-align: center;
      font-weight: bold;
      font-size: 14px;
    }

    .bar {
      flex: 1;
      height: 30px;
      position: relative;
      display: flex;
    }

    .left-bar {
      background-color: #ff6666;
      height: 100%;
    }

    .right-bar {
      background-color: #66b3ff;
      height: 100%;
    }

    .bar-label {
      position: absolute;
      top: 3px;
      font-size: 14px;
      font-weight: bold;
      color: #fff;
    }

    .left-percent {
      left: 10px;
    }

    .right-percent {
      right: 10px;
    }

    .icon-box {
      width: 40px;
      height: 40px;
      margin: 0 10px;
      background-color: #fff;
      border-radius: 5px;
      overflow: hidden;
    }

    .icon-box img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  </style>
</head>
<body>
  <h1>Risultati del Quiz Politico</h1>

  <div id="results"></div>

  <script>
    const axes = [
      {
        name: "Insurrezionalismo ↔ Riformismo",
        left: "Insurrezionalismo",
        right: "Riformismo",
        scores: JSON.parse(localStorage.getItem("axis_0")) || [0, 0],
        iconL: "img/p1.png",
        iconR: "img/p2.png"
      },
      {
        name: "Partitismo ↔ Sindacalismo",
        left: "Partitismo",
        right: "Sindacalismo",
        scores: JSON.parse(localStorage.getItem("axis_1")) || [0, 0],
        iconL: "img/p3.png",
        iconR: "img/p4.png"
      },
      {
        name: "Centralismo ↔ Decentralismo",
        left: "Centralismo",
        right: "Decentralismo",
        scores: JSON.parse(localStorage.getItem("axis_2")) || [0, 0],
        iconL: "img/p5.png",
        iconR: "img/p6.png"
      },
      {
        name: "Autoritarismo ↔ Libertarismo",
        left: "Autoritarismo",
        right: "Libertarismo",
        scores: JSON.parse(localStorage.getItem("axis_3")) || [0, 0],
        iconL: "img/p7.png",
        iconR: "img/p8.png"
      }
    ];

    function createBar(leftPercent, rightPercent, leftLabel, rightLabel, iconL, iconR) {
      const container = document.createElement("div");
      container.className = "axis-container";

      const title = document.createElement("div");
      title.className = "axis-title";
      title.innerText = `${leftLabel} ↔ ${rightLabel}`;
      container.appendChild(title);

      const barWrapper = document.createElement("div");
      barWrapper.className = "bar-wrapper";

      const leftIcon = document.createElement("div");
      leftIcon.className = "icon-box";
      leftIcon.innerHTML = `<img src="${iconL}" alt="">`;

      const rightIcon = document.createElement("div");
      rightIcon.className = "icon-box";
      rightIcon.innerHTML = `<img src="${iconR}" alt="">`;

      const leftText = document.createElement("div");
      leftText.className = "label";
      leftText.innerText = leftLabel;

      const rightText = document.createElement("div");
      rightText.className = "label";
      rightText.innerText = rightLabel;

      const bar = document.createElement("div");
      bar.className = "bar";

      const leftBar = document.createElement("div");
      leftBar.className = "left-bar";
      leftBar.style.width = leftPercent + "%";

      const rightBar = document.createElement("div");
      rightBar.className = "right-bar";
      rightBar.style.width = rightPercent + "%";

      const leftPercentLabel = document.createElement("div");
      leftPercentLabel.className = "bar-label left-percent";
      leftPercentLabel.innerText = leftPercent.toFixed(1) + "%";

      const rightPercentLabel = document.createElement("div");
      rightPercentLabel.className = "bar-label right-percent";
      rightPercentLabel.innerText = rightPercent.toFixed(1) + "%";

      bar.appendChild(leftBar);
      bar.appendChild(rightBar);
      bar.appendChild(leftPercentLabel);
      bar.appendChild(rightPercentLabel);

      barWrapper.appendChild(leftIcon);
      barWrapper.appendChild(leftText);
      barWrapper.appendChild(bar);
      barWrapper.appendChild(rightText);
      barWrapper.appendChild(rightIcon);

      container.appendChild(barWrapper);
      return container;
    }

    const resultDiv = document.getElementById("results");

    axes.forEach((axis, i) => {
      const [leftScore, rightScore] = axis.scores;
      const total = leftScore + rightScore || 1;
      const leftPercent = (leftScore / total) * 100;
      const rightPercent = 100 - leftPercent;

      const bar = createBar(
        leftPercent,
        rightPercent,
        axis.left,
        axis.right,
        axis.iconL,
        axis.iconR
      );

      resultDiv.appendChild(bar);
    });
  </script>
</body>
</html>
